@{
    ViewData["Title"] = "登录";
}


<blockquote class="layui-elem-quote news_search toolList" id="menus"></blockquote>

<div class="layui-row">
    <div class="layui-col-xs2">
        <ul id="demo"></ul>
    </div>
    <div class="layui-col-xs10">
        <table class="layui-hide" id="test-table-form"></table>

        <script type="text/html" id="test-table-switchTpl">
            <!-- 这里的 checked 的状态只是演示 -->
            <input type="checkbox" name="sex" lay-skin="switch" lay-text="女|男" lay-filter="test-table-sexDemo"
                   value="{{ d.id }}" data-json="{{ encodeURIComponent(JSON.stringify(d)) }}" {{ d.id == 10003 ? 'checked' : '' }}>
        </script>

        <script type="text/html" id="test-table-checkboxTpl">
            <!-- 这里的 checked 的状态只是演示 -->
            <input type="checkbox" name="lock" title="锁定" lay-filter="test-table-lockDemo"
                   value="{{d.id}}" data-json="{{ encodeURIComponent(JSON.stringify(d)) }}" {{ d.id == 10006 ? 'checked' : '' }}>
        </script>
    </div>
</div>

<script type="text/html" id="barList">
    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
</script>

@section Scripts{
    <script>
        layui.config({
            base: '/layuiadmin/' //静态资源所在路径
        }).extend({
            index: 'lib/index' //主入口模块
            }).use(['index', 'tree', 'table', 'form'], function () {
                //树
                layui.tree({
                    elem: '#demo' //传入元素选择器
                    , nodes: [{ //节点
                        name: '父节点1'
                        , children: [{
                            name: '子节点11'
                        }, {
                            name: '子节点12'
                        }]
                    }, {
                        name: '父节点2（可以点左侧箭头，也可以双击标题）'
                        , children: [{
                            name: '子节点21'
                            , children: [{
                                name: '子节点211'
                            }]
                        }]
                    }]
                });

                //
                var table = layui.table
                    , form = layui.form
                    , $ = layui.$;

                table.render({
                    elem: '#test-table-form'
                    , url: '/layuiadmin/json/console/tb.json'
                    , cellMinWidth: 80
                    , cols: [[
                        { type: 'numbers' }
                        , { type: 'checkbox' }
                        , { field: 'id', title: 'ID', width: 100, unresize: true, sort: true }
                        , { field: 'username', title: '用户名' }
                        , { field: 'city', title: '城市' }
                        , { field: 'wealth', title: '财富', minWidth: 120, sort: true }
                        , { field: 'sex', title: '性别', width: 85, templet: '#test-table-switchTpl', unresize: true }
                        , { field: 'lock', title: '是否锁定', width: 110, templet: '#test-table-checkboxTpl', unresize: true }
                    ]]
                    , page: true
                });

                //监听性别操作
                form.on('switch(test-table-sexDemo)', function (obj) {
                    var json = JSON.parse(decodeURIComponent($(this).data('json')));
                    layer.tips(this.value + ' ' + this.name + '：' + obj.elem.checked, obj.othis);

                    json = table.clearCacheKey(json);
                    console.log(json); //当前行数据
                });

                //监听锁定操作
                form.on('checkbox(test-table-lockDemo)', function (obj) {
                    var json = JSON.parse(decodeURIComponent($(this).data('json')));
                    layer.tips(this.value + ' ' + this.name + '：' + obj.elem.checked, obj.othis);

                    json = table.clearCacheKey(json);
                    console.log(json); //当前行数据
                });
            });
    </script>
}